# WiFi Verify Server Configuration

[server]
# Host to bind to
host = "0.0.0.0"

# HTTP server settings
http_port = 3000
enable_http = true

# HTTPS server settings
https_port = 3443
enable_https = false

# SSL certificate paths (required for HTTPS)
# ssl_cert_path = "certs/server.crt"
# ssl_key_path = "certs/server.key"

# Domain for automatic HTTPS (optional, used with Let's Encrypt)
# domain = "your-domain.com"
# auto_https = false

[logging]
# Log level: trace, debug, info, warn, error
level = "info"

[security]
# Enable CORS (cross-origin resource sharing)
enable_cors = true

# Allowed origins for CORS (when enabled)
allowed_origins = ["http://localhost:3000", "https://localhost:3443"]

# Authentication Configuration
[auth]
# Enable authentication globally
enable_auth = false

# Access Control - List of allowed user handles/emails
# If empty, all authenticated users are allowed
# If not empty, only users in this list can access the application
# For OAuth: use email or handle from the provider (e.g., "user@example.com" or "@alice.bsky.social")
# For plain login: use the username configured in [[auth.plain_login.users]]
allowed_users = []

# Example with allowed users (uncomment to enable):
# allowed_users = [
#     "admin",                    # Plain login username
#     "@alice.bsky.social",       # Bluesky handle
#     "user@example.com",         # OAuth email (GitHub, Google, LinkedIn)
# ]

# OAuth2 Providers
[auth.oauth]
# Enable specific OAuth providers
enable_bluesky = false
enable_github = false
enable_google = false
enable_linkedin = false

# Bluesky OAuth (decentralized, no central registration required!)
# The client_id should be a URL to your client-metadata.json file
# bluesky_client_id = "http://localhost:3000/public/client-metadata.json"
# bluesky_redirect_url = "http://localhost:3000/auth/bluesky/callback"

# GitHub OAuth (get credentials from https://github.com/settings/developers)
# github_client_id = "your_github_client_id"
# github_client_secret = "your_github_client_secret"
# github_redirect_url = "http://localhost:3000/auth/github/callback"

# Google OAuth (get credentials from https://console.cloud.google.com/apis/credentials)
# google_client_id = "your_google_client_id"
# google_client_secret = "your_google_client_secret"
# google_redirect_url = "http://localhost:3000/auth/google/callback"

# LinkedIn OAuth (get credentials from https://www.linkedin.com/developers/apps)
# linkedin_client_id = "your_linkedin_client_id"
# linkedin_client_secret = "your_linkedin_client_secret"
# linkedin_redirect_url = "http://localhost:3000/auth/linkedin/callback"

# Plain Login (username/password) - File-based authentication
[auth.plain_login]
enabled = false

# List of allowed users with passwords
# SECURITY NOTE: In production, use bcrypt hashed passwords (starting with $2)
# To generate a bcrypt hash: use online tools or bcrypt CLI
# Example bcrypt hash: $2b$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/LewY5xyJNPtYPmvwe
# For now, plain text passwords are supported but NOT recommended for production

# Example users (commented out by default):
# [[auth.plain_login.users]]
# username = "admin"
# password = "admin123"  # Plain text (not recommended for production)
# display_name = "Administrator"
#
# [[auth.plain_login.users]]
# username = "user1"
# password = "$2b$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/LewY5xyJNPtYPmvwe"  # bcrypt hash
# display_name = "User One"

# Session Configuration
[auth.session]
cookie_name = "session_id"
timeout_seconds = 86400  # 24 hours
secure = false  # Set to true for HTTPS only cookies